    {% extends 'layouts/base.html' %}
    {% load static %}

    {% block content %}
        <div class="report-container">
            <style>
                .report-container {
                    background: #fff;
                    padding: 20px;
                    border-radius: 8px;
                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                    color: #333;
                    max-width: 1200px;
                    margin: auto;
                }
                .report-header {
                    border-bottom: 2px solid #007bff;
                    padding-bottom: 10px;
                    margin-bottom: 20px;
                    text-align: center;
                }
                .report-header h1 {
                    font-size: 2.2rem;
                    margin-bottom: 10px;
                }
                .report-date {
                    font-size: 1rem;
                    color: #555;
                }
                .report-section {
                    margin-bottom: 30px;
                }
                .report-overview {
                    display: flex;
                    justify-content: space-between;
                    padding: 20px;
                    background-color: #f8f9fa;
                    border-radius: 8px;
                }
                .report-stat {
                    flex: 1;
                    text-align: center;
                    margin: 0 10px;
                }
                .report-stat .stat-number {
                    font-size: 1.8rem;
                    color: #007bff;
                    display: block;
                    font-weight: bold;
                }
                .report-stat .stat-label {
                    font-size: 1rem;
                    color: #555;
                }
                .report-table {
                    width: 100%;
                    border-collapse: collapse;
                    margin-top: 20px;
                }
                .report-table th, .report-table td {
                    padding: 12px 15px;
                    border: 1px solid #ddd;
                    text-align: left;
                }
                .report-table th {
                    background-color: #64748b;
                    color: #fff;
                    font-weight: bold;
                }
                .report-table tr:nth-child(even) {
                    background-color: #f2f2f2;
                }
                .report-table tr:hover {
                    background-color: #e9ecef;
                }
            </style>
            <header class="report-header">
                <h1>Weekly Report</h1>
                <p>Report Period: <span class="report-date">{{ start_date }} - {{ end_date }}</span></p>
            </header>

            <section class="report-section">
                <h2>Overall Weekly Statistics</h2>
                <div class="report-overview">
                    <div class="report-stat">
                        <span class="stat-number">{{ total_opened }}</span>
                        <span class="stat-label">Total Opened Tickets</span>
                    </div>
                    <div class="report-stat">
                        <span class="stat-number">{{ total_pending }}</span>
                        <span class="stat-label">Total Pending Tickets</span>
                    </div>
                    <div class="report-stat">
                        <span class="stat-number">{{ total_closed }}</span>
                        <span class="stat-label">Total Closed Tickets</span>
                    </div>
                    <div class="report-stat">
                        <span class="stat-number">{{ total_resolved }}</span>
                        <span class="stat-label">Total Resolved Tickets</span>
                    </div>
                </div>
            </section>

            <section class="report-section">
                <h2>Branch Statistics</h2>
                <p><strong>Branch Most Assigned:</strong> {{ branch_most_inquiries.branch_opened }} ({{ branch_most_inquiries.tickets }} inquiries)</p>
                <p><strong>Total Tickets Assigned:</strong> {{ total_inquiries }}</p>
                <table class = 'report-table'>
                    <thead>
                        <tr>
                            <th>Branch</th>
                            <th>Open Tickets</th>
                            <th>Pending Tickets</th>
                            <th>Closed Tickets</th>
                            <th>Resolved Tickets</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for branch in branch_stats %}
                        <tr>
                            <td>{{ branch.branch_opened }}</td>
                            <td>{{ branch.open_count }}</td>
                            <td>{{ branch.pending_count }}</td>
                            <td>{{ branch.closed_count }}</td>
                            <td>{{ branch.resolved_count }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </section>

            <section class="report-section">
                <h2>Support Member Performance</h2>
                <table class="report-table">
                    <thead>
                        <tr>
                            <th>Support Member</th>
                            <th>Resolved Tickets</th>
                            <th>Pending Tickets</th>
                            <th>Closed Tickets</th>
                            <th>Average Resolution Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for data in report_data %}
                            <tr>
                                <td>{{ data.member }}</td>
                                <td>{{ data.resolved_count }}</td>
                                <td>{{ data.pending_count }}</td>
                                <td>{{ data.closed_count }}</td>
                                <td>{{ data.average_time }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </section>

            <section class="report-section">
                <h2>Daily Ticket Statistics</h2>
                <table class="report-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Opened</th>
                            <th>Closed</th>
                            <th>Resolved</th>
                            <th>Pending</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for day in daily_counts %}
                            <tr>
                                <td>{{ day.created_at__date }}</td>
                                <td>{{ day.opened }}</td>
                                <td>{{ day.closed }}</td>
                                <td>{{ day.resolved }}</td>
                                <td>{{ day.pending_tickets }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </section>
        </div>

    {% endblock content %}




        
